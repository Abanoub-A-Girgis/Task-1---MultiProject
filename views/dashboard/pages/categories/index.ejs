<%- include('../../partials/headerLayout.ejs', {pageName: "Categories", pageTitle: "Categories Page", pathLevel: "/"}) %>

  <div class="mx-5 my-4">
  <a href="/dashboard/categories/createForm" class="btn btn-success mb-1" style="display: block; width: fit-content; margin-left: auto;"><i class="fa-solid fa-plus" style="margin-right: 0.5rem;"></i>Add New</a>

  <%if(categories.length > 0){%>
    <table class="table table-striped table-hover">
        <tr>
            <th>Category Name</th><th>Operations</th>
        </tr>    
        <% categories.forEach((oneCategory) => { %>
            <tr>
                <th><%= oneCategory.catName %></th>
                <th>
                    <a href="/dashboard/categories/show/<%=oneCategory.id%>">
                        <i class="fa-solid fa-eye"></i>
                    </a>
                    &nbsp;&nbsp;&nbsp;
                    <a href="/dashboard/categories/updateForm/<%=oneCategory.id%>">
                        <i class="fa-solid fa-pencil" style="color: #FFA500;"></i>
                    </a>
                    &nbsp;&nbsp;&nbsp;
                    <span onclick="destroy(this);" categoryID="<%=oneCategory.id%>" style="cursor: pointer;">
                        <i class="fa-solid fa-trash-can" style="color: #e66565;"></i>
                    </span>
                </th>
            </tr>
        <% }); %>
    </table>
<%}
else {%>
    <h3>No categories created yet !!!!</h3>
<%}%>
</div>

<script>
    function destroy(obj){
        if(confirm("Are You Sure you want to Delete this Category ?")) {
            id = obj.getAttribute("categoryID");
            window.location.replace("/dashboard/categories/destroy/" + id);
        }        
    }
</script>

<%- include('../../partials/footerLayout.ejs', { pathLevel: "/" }) %>